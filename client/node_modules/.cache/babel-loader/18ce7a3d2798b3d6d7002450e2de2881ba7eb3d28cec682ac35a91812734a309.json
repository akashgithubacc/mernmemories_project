{"ast":null,"code":"import _objectSpread from\"C:/Users/deepa/OneDrive/Desktop/Complete Web Development/mernmemories/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/deepa/OneDrive/Desktop/Complete Web Development/mernmemories/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import useStyles from\"./styles\";import{TextField,Button,Typography,Paper}from\"@material-ui/core\";import FileBase from\"react-file-base64\";import{useDispatch}from\"react-redux\";import{createPost,updatePost}from\"../../actions/posts\";import{useSelector}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Form=function Form(_ref){var currentId=_ref.currentId,setCurrentId=_ref.setCurrentId,isLoggedIn=_ref.isLoggedIn;var navigate=useNavigate();var _useState=useState({creator:\"\",title:\"\",message:\"\",tags:\"\",selectedFile:\"\"}),_useState2=_slicedToArray(_useState,2),postData=_useState2[0],setPostData=_useState2[1];var post=useSelector(function(state){var postsArray=Object.values(state.posts);return currentId?postsArray[1].find(function(p){return p._id===currentId;}):null;});var classes=useStyles();var dispatch=useDispatch();useEffect(function(){if(post)setPostData(post);},[post]);var handleSubmit=function handleSubmit(e){e.preventDefault();if(currentId){dispatch(updatePost(currentId,postData,navigate));}else{dispatch(createPost(postData,navigate));}clear();};var clear=function clear(){setCurrentId(null);setPostData({creator:\"\",title:\"\",message:\"\",tags:\"\",selectedFile:\"\"});};return isLoggedIn===false?/*#__PURE__*/_jsx(Paper,{className:classes.paper,raised:true,elevation:6,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Please Sign in For Creating/ Editing/ Deleting Your Own Memory\"})}):/*#__PURE__*/_jsx(Paper,{className:classes.paper,raised:true,elevation:6,children:/*#__PURE__*/_jsxs(\"form\",{autoComplete:\"off\",noValidate:true,className:\"\".concat(classes.root,\" \").concat(classes.form),onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",children:[\" \",currentId?\"Editing \\\"\".concat(post.title,\"\\\"\"):\"Creating a Memory\"]}),/*#__PURE__*/_jsx(TextField,{name:\"creator\",variant:\"outlined\",label:\"Creator\",fullWidth:true,value:postData.creator,required:true//So This is very Important\n// Here\n// OnChnage function is taking an evenet e as an params\n// and it is updating the postData object from the useState\n// postData contains all the data or the post data of the\n// post to be made by the creator\n// So setPostData includes the previous postData values\n// and updates only that postData object property\n// which is specified in value by creator : e.target.value\n// ie creator property of postData is changed to e.t.value\n,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{creator:e.target.value}));}}),/*#__PURE__*/_jsx(TextField,{name:\"title\",variant:\"outlined\",label:\"Title\",fullWidth:true,required:true,value:postData.title,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{title:e.target.value}));}}),/*#__PURE__*/_jsx(TextField,{name:\"message\",variant:\"outlined\",label:\"Message\",fullWidth:true,required:true,multiline:true,rows:6,maxRows:10,value:postData.message,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{message:e.target.value}));}}),/*#__PURE__*/_jsx(TextField,{name:\"tags\",variant:\"outlined\",label:\"Tags ( Separated by Commas )\",fullWidth:true,required:true,value:postData.tags,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{tags:e.target.value.split(\",\")}));}}),/*#__PURE__*/_jsx(\"div\",{className:classes.fileInput,children:/*#__PURE__*/_jsx(FileBase,{type:\"file\",multiple:false,onDone:function onDone(_ref2){var base64=_ref2.base64;return setPostData(_objectSpread(_objectSpread({},postData),{},{selectedFile:base64}));}})}),/*#__PURE__*/_jsx(Button,{className:classes.buttonSubmit,variant:\"contained\",color:\"primary\",type:\"submit\",size:\"large\",fullWidth:true,style:{marginBottom:\"10px\"},children:\"Submit\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",onClick:clear,size:\"small\",fullWidth:true,children:\"Clear\"})]})});};export default Form;","map":{"version":3,"names":["React","useState","useEffect","useStyles","TextField","Button","Typography","Paper","FileBase","useDispatch","createPost","updatePost","useSelector","useNavigate","jsx","_jsx","jsxs","_jsxs","Form","_ref","currentId","setCurrentId","isLoggedIn","navigate","_useState","creator","title","message","tags","selectedFile","_useState2","_slicedToArray","postData","setPostData","post","state","postsArray","Object","values","posts","find","p","_id","classes","dispatch","handleSubmit","e","preventDefault","clear","className","paper","raised","elevation","children","variant","autoComplete","noValidate","concat","root","form","onSubmit","name","label","fullWidth","value","required","onChange","_objectSpread","target","multiline","rows","maxRows","split","fileInput","type","multiple","onDone","_ref2","base64","buttonSubmit","color","size","style","marginBottom","onClick"],"sources":["C:/Users/deepa/OneDrive/Desktop/Complete Web Development/mernmemories/client/src/components/Form/Form.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport useStyles from \"./styles\";\r\nimport { TextField, Button, Typography, Paper } from \"@material-ui/core\";\r\nimport FileBase from \"react-file-base64\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { createPost, updatePost } from \"../../actions/posts\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst Form = ({ currentId, setCurrentId, isLoggedIn }) => {\r\n  const navigate = useNavigate();\r\n\r\n  const [postData, setPostData] = useState({\r\n    creator: \"\",\r\n    title: \"\",\r\n    message: \"\",\r\n    tags: \"\",\r\n    selectedFile: \"\",\r\n  });\r\n\r\n  const post = useSelector((state) => {\r\n    const postsArray = Object.values(state.posts);\r\n\r\n    return currentId ? postsArray[1].find((p) => p._id === currentId) : null;\r\n  });\r\n\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (post) setPostData(post);\r\n  }, [post]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (currentId) {\r\n      dispatch(updatePost(currentId, postData, navigate));\r\n    } else {\r\n      dispatch(createPost(postData, navigate));\r\n    }\r\n    clear();\r\n  };\r\n\r\n  const clear = () => {\r\n    setCurrentId(null);\r\n    setPostData({\r\n      creator: \"\",\r\n      title: \"\",\r\n      message: \"\",\r\n      tags: \"\",\r\n      selectedFile: \"\",\r\n    });\r\n  };\r\n\r\n  return isLoggedIn === false ? (\r\n    <Paper className={classes.paper} raised elevation={6}>\r\n      <Typography variant=\"h6\">\r\n        Please Sign in For Creating/ Editing/ Deleting Your Own Memory\r\n      </Typography>\r\n    </Paper>\r\n  ) : (\r\n    <Paper className={classes.paper} raised elevation={6}>\r\n      <form\r\n        autoComplete=\"off\"\r\n        noValidate\r\n        className={`${classes.root} ${classes.form}`}\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <Typography variant=\"h6\">\r\n          {\" \"}\r\n          {currentId ? `Editing \"${post.title}\"` : \"Creating a Memory\"}\r\n        </Typography>\r\n        <TextField\r\n          name=\"creator\"\r\n          variant=\"outlined\"\r\n          label=\"Creator\"\r\n          fullWidth\r\n          value={postData.creator}\r\n          required\r\n          //So This is very Important\r\n          // Here\r\n          // OnChnage function is taking an evenet e as an params\r\n          // and it is updating the postData object from the useState\r\n          // postData contains all the data or the post data of the\r\n          // post to be made by the creator\r\n          // So setPostData includes the previous postData values\r\n          // and updates only that postData object property\r\n          // which is specified in value by creator : e.target.value\r\n          // ie creator property of postData is changed to e.t.value\r\n          onChange={(e) =>\r\n            setPostData({ ...postData, creator: e.target.value })\r\n          }\r\n        />\r\n\r\n        <TextField\r\n          name=\"title\"\r\n          variant=\"outlined\"\r\n          label=\"Title\"\r\n          fullWidth\r\n          required\r\n          value={postData.title}\r\n          onChange={(e) => setPostData({ ...postData, title: e.target.value })}\r\n        />\r\n\r\n        <TextField\r\n          name=\"message\"\r\n          variant=\"outlined\"\r\n          label=\"Message\"\r\n          fullWidth\r\n          required\r\n          multiline\r\n          rows={6}\r\n          maxRows={10}\r\n          value={postData.message}\r\n          onChange={(e) =>\r\n            setPostData({ ...postData, message: e.target.value })\r\n          }\r\n        />\r\n\r\n        <TextField\r\n          name=\"tags\"\r\n          variant=\"outlined\"\r\n          label=\"Tags ( Separated by Commas )\"\r\n          fullWidth\r\n          required\r\n          value={postData.tags}\r\n          onChange={(e) =>\r\n            setPostData({ ...postData, tags: e.target.value.split(\",\") })\r\n          }\r\n        />\r\n\r\n        <div className={classes.fileInput}>\r\n          <FileBase\r\n            type=\"file\"\r\n            multiple={false}\r\n            onDone={({ base64 }) =>\r\n              setPostData({ ...postData, selectedFile: base64 })\r\n            }\r\n          />\r\n        </div>\r\n\r\n        <Button\r\n          className={classes.buttonSubmit}\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          type=\"submit\"\r\n          size=\"large\"\r\n          fullWidth\r\n          style={{ marginBottom: \"10px\" }}\r\n        >\r\n          Submit\r\n        </Button>\r\n\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          onClick={clear}\r\n          size=\"small\"\r\n          fullWidth\r\n        >\r\n          Clear\r\n        </Button>\r\n      </form>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}