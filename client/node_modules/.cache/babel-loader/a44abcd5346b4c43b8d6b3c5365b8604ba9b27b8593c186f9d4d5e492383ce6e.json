{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/deepa/OneDrive/Desktop/Complete Web Development/mernmemories/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/deepa/OneDrive/Desktop/Complete Web Development/mernmemories/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/deepa/OneDrive/Desktop/Complete Web Development/mernmemories/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/deepa/OneDrive/Desktop/Complete Web Development/mernmemories/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/deepa/OneDrive/Desktop/Complete Web Development/mernmemories/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Avatar,Button,Paper,Grid,Typography,Container,TextField}from\"@material-ui/core\";import useStyles from\"./styles\";import LockOutlinedIcon from\"@material-ui/icons/LockOutlined\";import Input from\"./Input\";import{GoogleLogin,googleLogout}from\"@react-oauth/google\";import{CreateOrGetUser}from\"./userData\";import{useDispatch}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialState={firstName:\"\",lastName:\"\",email:\"\",password:\"\",confirmPassword:\"\"};var Auth=function Auth(_ref){var isLoggedIn=_ref.isLoggedIn,setIsLoggedIn=_ref.setIsLoggedIn;var classes=useStyles();var dispatch=useDispatch();//let isSignup = false;\nvar _useState=useState(true),_useState2=_slicedToArray(_useState,2),isSignup=_useState2[0],setIsSignup=_useState2[1];var navigate=useNavigate();var _useState3=useState(initialState),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];var handleSubmit=function handleSubmit(e){e.preventDefault();var result={name:\"\".concat(formData.firstName,\" \").concat(formData.lastName),email:formData.email,profile:formData.firstName.split(\" \")[0]};var sub=\"\";dispatch({type:\"AUTH\",data:{result:result,sub:sub}});setIsLoggedIn(true);navigate(\"/\");};var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormData(function(prevFormData){return _objectSpread(_objectSpread({},prevFormData),{},_defineProperty({},name,value));});};var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showPassword=_useState6[0],setShowPassword=_useState6[1];var handleShowPassword=function handleShowPassword(){return setShowPassword(function(prevShowPassword){return!prevShowPassword;});};var googleSuccess=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(res){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:CreateOrGetUser(res).then(function(_ref3){var result=_ref3.result,sub=_ref3.sub;dispatch({type:\"AUTH\",data:{result:result,sub:sub}});setIsLoggedIn(true);navigate(\"/\");}).catch(function(error){console.log(error);});case 1:case\"end\":return _context.stop();}},_callee);}));return function googleSuccess(_x){return _ref2.apply(this,arguments);};}();var googleFailure=function googleFailure(){console.log(\"Not able to sign in with Google. Try again Later!!\");};return/*#__PURE__*/_jsx(Container,{component:\"main\",maxWidth:\"xs\",children:/*#__PURE__*/_jsxs(Paper,{className:classes.paper,elevation:10,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.avatar,children:/*#__PURE__*/_jsx(LockOutlinedIcon,{})}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:isSignup?\"Sign up\":\"Sign in\"}),/*#__PURE__*/_jsxs(\"form\",{className:classes.form,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[isSignup&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Input,{name:\"firstName\",label:\"First Name\",handleChange:handleChange,autoFocus:true,half:true}),/*#__PURE__*/_jsx(Input,{name:\"lastName\",label:\"Last Name\",handleChange:handleChange,half:true})]}),/*#__PURE__*/_jsx(Input,{name:\"email\",label:\"Email Address\",handleChange:handleChange,type:\"email\"}),/*#__PURE__*/_jsx(Input,{name:\"password\",label:\"Password\",handleChange:handleChange,type:showPassword?\"text\":\"password\",handleShowPassword:handleShowPassword})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",className:classes.submit,children:\"Sign up\"}),/*#__PURE__*/_jsx(GoogleLogin,{clientId:\"848767098696-kk4tdbnm0c748s1t9u49qcebmmn2m3us.apps.googleusercontent.com\",onSuccess:googleSuccess,onFailure:googleFailure,fullWidth:true})]})]})});};export default Auth;","map":{"version":3,"names":["React","useState","Avatar","Button","Paper","Grid","Typography","Container","TextField","useStyles","LockOutlinedIcon","Input","GoogleLogin","googleLogout","CreateOrGetUser","useDispatch","useNavigate","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","initialState","firstName","lastName","email","password","confirmPassword","Auth","_ref","isLoggedIn","setIsLoggedIn","classes","dispatch","_useState","_useState2","_slicedToArray","isSignup","setIsSignup","navigate","_useState3","_useState4","formData","setFormData","handleSubmit","e","preventDefault","result","name","concat","profile","split","sub","type","data","handleChange","_e$target","target","value","prevFormData","_objectSpread","_defineProperty","_useState5","_useState6","showPassword","setShowPassword","handleShowPassword","prevShowPassword","googleSuccess","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","then","_ref3","catch","error","console","log","stop","_x","apply","arguments","googleFailure","component","maxWidth","children","className","paper","elevation","avatar","variant","form","onSubmit","container","spacing","label","autoFocus","half","fullWidth","color","submit","clientId","onSuccess","onFailure"],"sources":["C:/Users/deepa/OneDrive/Desktop/Complete Web Development/mernmemories/client/src/components/Auth/Auth.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport {\r\n  Avatar,\r\n  Button,\r\n  Paper,\r\n  Grid,\r\n  Typography,\r\n  Container,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport useStyles from \"./styles\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport Input from \"./Input\";\r\nimport { GoogleLogin, googleLogout } from \"@react-oauth/google\";\r\nimport { CreateOrGetUser } from \"./userData\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst initialState = {\r\n  firstName: \"\",\r\n  lastName: \"\",\r\n  email: \"\",\r\n  password: \"\",\r\n  confirmPassword: \"\",\r\n};\r\n\r\nconst Auth = ({ isLoggedIn, setIsLoggedIn }) => {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  //let isSignup = false;\r\n  const [isSignup, setIsSignup] = useState(true);\r\n  const navigate = useNavigate();\r\n  const [formData, setFormData] = useState(initialState);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const result = {\r\n      name: `${formData.firstName} ${formData.lastName}`,\r\n      email: formData.email,\r\n      profile: formData.firstName.split(\" \")[0],\r\n    };\r\n\r\n    const sub = \"\";\r\n    dispatch({ type: \"AUTH\", data: { result, sub } });\r\n    setIsLoggedIn(true);\r\n    navigate(\"/\");\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    setFormData((prevFormData) => ({\r\n      ...prevFormData,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  const handleShowPassword = () =>\r\n    setShowPassword((prevShowPassword) => !prevShowPassword);\r\n\r\n  const googleSuccess = async (res) => {\r\n    CreateOrGetUser(res)\r\n      .then(({ result, sub }) => {\r\n        dispatch({ type: \"AUTH\", data: { result, sub } });\r\n        setIsLoggedIn(true);\r\n        navigate(\"/\");\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n  const googleFailure = () => {\r\n    console.log(\"Not able to sign in with Google. Try again Later!!\");\r\n  };\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <Paper className={classes.paper} elevation={10}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography variant=\"h5\">{isSignup ? \"Sign up\" : \"Sign in\"}</Typography>\r\n\r\n        <form className={classes.form} onSubmit={handleSubmit}>\r\n          <Grid container spacing={2}>\r\n            {isSignup && (\r\n              <>\r\n                <Input\r\n                  name=\"firstName\"\r\n                  label=\"First Name\"\r\n                  handleChange={handleChange}\r\n                  autoFocus\r\n                  half\r\n                />\r\n                <Input\r\n                  name=\"lastName\"\r\n                  label=\"Last Name\"\r\n                  handleChange={handleChange}\r\n                  half\r\n                />\r\n              </>\r\n            )}\r\n            <Input\r\n              name=\"email\"\r\n              label=\"Email Address\"\r\n              handleChange={handleChange}\r\n              type=\"email\"\r\n            />\r\n            <Input\r\n              name=\"password\"\r\n              label=\"Password\"\r\n              handleChange={handleChange}\r\n              type={showPassword ? \"text\" : \"password\"}\r\n              handleShowPassword={handleShowPassword}\r\n            />\r\n          </Grid>\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n          >\r\n            Sign up\r\n          </Button>\r\n\r\n          <GoogleLogin\r\n            clientId=\"848767098696-kk4tdbnm0c748s1t9u49qcebmmn2m3us.apps.googleusercontent.com\"\r\n            onSuccess={googleSuccess}\r\n            onFailure={googleFailure}\r\n            fullWidth\r\n          />\r\n        </form>\r\n      </Paper>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Auth;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}